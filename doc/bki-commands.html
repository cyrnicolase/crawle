<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>BKI命令</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.0 手册"
HREF="index.html"><LINK
REL="UP"
TITLE="BKI后端接口"
HREF="bki.html"><LINK
REL="PREVIOUS"
TITLE="BKI文件格式"
HREF="bki-format.html"><LINK
REL="NEXT"
TITLE="自举BKI文件的结构"
HREF="bki-structure.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-12-17T04:56:33"></HEAD
><BODY
CLASS="SECT1"
>
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/9.6/postgresql/doc/src/sgml/bki.sgml" target="_blank" 
title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.0 手册</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="BKI文件格式"
HREF="bki-format.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="bki.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>&#31456; 66. <ACRONYM
CLASS="ACRONYM"
>BKI</ACRONYM
>后端接口</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="自举BKI文件的结构"
HREF="bki-structure.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="BKI-COMMANDS"
>66.2. <ACRONYM
CLASS="ACRONYM"
>BKI</ACRONYM
>命令</A
></H1
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>create</TT
>
     <TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>
     <TT
CLASS="REPLACEABLE"
><I
>tableoid</I
></TT
>
     [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>bootstrap</TT
></SPAN
>]
     [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>shared_relation</TT
></SPAN
>]
     [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>without_oids</TT
></SPAN
>]
     [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>rowtype_oid</TT
> <TT
CLASS="REPLACEABLE"
><I
>oid</I
></TT
></SPAN
>]
     (<TT
CLASS="REPLACEABLE"
><I
>name1</I
></TT
> =
     <TT
CLASS="REPLACEABLE"
><I
>type1</I
></TT
>
     [<SPAN
CLASS="OPTIONAL"
>FORCE NOT NULL | FORCE NULL </SPAN
>] [<SPAN
CLASS="OPTIONAL"
>,
     <TT
CLASS="REPLACEABLE"
><I
>name2</I
></TT
> =
     <TT
CLASS="REPLACEABLE"
><I
>type2</I
></TT
>
     [<SPAN
CLASS="OPTIONAL"
>FORCE NOT NULL | FORCE NULL </SPAN
>],
     ...</SPAN
>])</DT
><DD
><P
>      创建一个叫做<TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>，OID为<TT
CLASS="REPLACEABLE"
><I
>tableoid</I
></TT
>的表，它的列在圆括弧中给出。
     </P
><P
>      <TT
CLASS="FILENAME"
>bootstrap.c</TT
>直接支持下列列类型：<TT
CLASS="TYPE"
>bool</TT
>、<TT
CLASS="TYPE"
>bytea</TT
>、<TT
CLASS="TYPE"
>char</TT
>（1 字节）、<TT
CLASS="TYPE"
>name</TT
>、<TT
CLASS="TYPE"
>int2</TT
>、<TT
CLASS="TYPE"
>int4</TT
>、<TT
CLASS="TYPE"
>regproc</TT
>、<TT
CLASS="TYPE"
>regclass</TT
>、<TT
CLASS="TYPE"
>regtype</TT
>、<TT
CLASS="TYPE"
>text</TT
>、<TT
CLASS="TYPE"
>oid</TT
>、<TT
CLASS="TYPE"
>tid</TT
>、<TT
CLASS="TYPE"
>xid</TT
>、<TT
CLASS="TYPE"
>cid</TT
>、<TT
CLASS="TYPE"
>int2vector</TT
>、<TT
CLASS="TYPE"
>oidvector</TT
>、<TT
CLASS="TYPE"
>_int4</TT
>（数组）、<TT
CLASS="TYPE"
>_text</TT
>（数组）、<TT
CLASS="TYPE"
>_oid</TT
>（数组）、<TT
CLASS="TYPE"
>_char</TT
>（数组）、<TT
CLASS="TYPE"
>_aclitem</TT
>（数组）。尽管我们可以创建包含其它类型列的表， 但是我们只有在创建完<TT
CLASS="STRUCTNAME"
>pg_type</TT
>并且填充了合适的记录之后才行（这实际上就意味着在自举表中，只能使用这些列类型，而非自举目录可以使用任意内置类型）。
     </P
><P
>      如果声明了<TT
CLASS="LITERAL"
>bootstrap</TT
>，那么该表将只在磁盘上创建；不会向<TT
CLASS="STRUCTNAME"
>pg_class</TT
>、<TT
CLASS="STRUCTNAME"
>pg_attribute</TT
>等表里面输入任何与该表相关的东西。因此这样的表将无法被普通的SQL操作访问，直到那些记录被用硬办法（用<TT
CLASS="LITERAL"
>insert</TT
>命令）建立。 这个选项用于创建<TT
CLASS="STRUCTNAME"
>pg_class</TT
>等表本身。
     </P
><P
>      如果声明了<TT
CLASS="LITERAL"
>shared_relation</TT
>，那么表就作为共享表创建。除非声明了<TT
CLASS="LITERAL"
>without_oids</TT
>，否则表将会有OID。表的行类型OID（<TT
CLASS="STRUCTNAME"
>pg_type</TT
>的OID）可以有选择性地通过<TT
CLASS="LITERAL"
>rowtype_oid</TT
>子句指定。如果没有指定，会为之自产生一个OID（如果<TT
CLASS="LITERAL"
>bootstrap</TT
>被指定，则<TT
CLASS="LITERAL"
>rowtype_oid</TT
>是无效的，但不管怎样它还是被写在了文档中）。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>open</TT
> <TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
></DT
><DD
><P
>      打开名为<TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>的表进行数据插入。任何当前打开的表将被关闭。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>close</TT
> [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
></SPAN
>]</DT
><DD
><P
>      关闭打开着的表。给出的表名用于交叉检查，但并不是必须的。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>insert</TT
> [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>OID =</TT
> <TT
CLASS="REPLACEABLE"
><I
>oid_value</I
></TT
></SPAN
>] <TT
CLASS="LITERAL"
>(</TT
> <TT
CLASS="REPLACEABLE"
><I
>value1</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>value2</I
></TT
> ... <TT
CLASS="LITERAL"
>)</TT
></DT
><DD
><P
>      用<TT
CLASS="REPLACEABLE"
><I
>value1</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>value2</I
></TT
> 等作为列值以及<TT
CLASS="REPLACEABLE"
><I
>oid_value</I
></TT
>作为其 OID向打开的表插入一条新记录。如果<TT
CLASS="REPLACEABLE"
><I
>oid_value</I
></TT
>为零（0）或者该子句被忽略而表可以具有OID，则会为之赋予下一个可用的OID。
     </P
><P
>      NULL 可以用特殊的关键字<TT
CLASS="LITERAL"
>_null_</TT
>指定。包含空白的值必须用双引号引用。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>declare</TT
> [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="LITERAL"
>unique</TT
></SPAN
>]
     <TT
CLASS="LITERAL"
>index</TT
> <TT
CLASS="REPLACEABLE"
><I
>indexname</I
></TT
>
     <TT
CLASS="REPLACEABLE"
><I
>indexoid</I
></TT
>
     <TT
CLASS="LITERAL"
>on</TT
> <TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>
     <TT
CLASS="LITERAL"
>using</TT
> <TT
CLASS="REPLACEABLE"
><I
>amname</I
></TT
>
     <TT
CLASS="LITERAL"
>(</TT
> <TT
CLASS="REPLACEABLE"
><I
>opclass1</I
></TT
>
     <TT
CLASS="REPLACEABLE"
><I
>name1</I
></TT
>
     [<SPAN
CLASS="OPTIONAL"
>, ...</SPAN
>] <TT
CLASS="LITERAL"
>)</TT
></DT
><DD
><P
>      在名为<TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>的表上用<TT
CLASS="REPLACEABLE"
><I
>amname</I
></TT
>访问方法创建一个OID为<TT
CLASS="REPLACEABLE"
><I
>indexoid</I
></TT
>的名为<TT
CLASS="REPLACEABLE"
><I
>indexname</I
></TT
>的索引。 索引的域被称为<TT
CLASS="REPLACEABLE"
><I
>name1</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>name2</I
></TT
>等，而使用的操作符类分别是<TT
CLASS="REPLACEABLE"
><I
>opclass1</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>opclass2</I
></TT
>等。 该命令将会创建索引文件和适当的系统目录项，但是索引内容不会被此命令初始化。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>declare toast</TT
>
     <TT
CLASS="REPLACEABLE"
><I
>toasttableoid</I
></TT
>
     <TT
CLASS="REPLACEABLE"
><I
>toastindexoid</I
></TT
>
     <TT
CLASS="LITERAL"
>on</TT
> <TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
></DT
><DD
><P
>      为名为<TT
CLASS="REPLACEABLE"
><I
>tablename</I
></TT
>的表创建一个TOAST表。该TOAST表将被赋予由<TT
CLASS="REPLACEABLE"
><I
>toasttableoid</I
></TT
>表示的OID，且它的索引将被赋予由<TT
CLASS="REPLACEABLE"
><I
>toastindexoid</I
></TT
>表示的OID。和<TT
CLASS="LITERAL"
>declare index</TT
>一样，索引的填充将被推迟。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>build indices</TT
></DT
><DD
><P
>      填充之前声明的索引。
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="bki-format.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>&#36215;&#22987;&#39029;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="bki-structure.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><ACRONYM
CLASS="ACRONYM"
>BKI</ACRONYM
>文件格式</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="bki.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>自举<ACRONYM
CLASS="ACRONYM"
>BKI</ACRONYM
>文件的结构</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
