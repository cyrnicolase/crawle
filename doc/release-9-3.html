<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>版本 9.3</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.0 手册"
HREF="index.html"><LINK
REL="UP"
TITLE="版本说明"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="版本 9.3.1"
HREF="release-9-3-1.html"><LINK
REL="NEXT"
TITLE="版本 9.2.18"
HREF="release-9-2-18.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-12-17T04:56:33"></HEAD
><BODY
CLASS="SECT1"
>
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/9.6/postgresql/doc/src/sgml/release-9.3.sgml" target="_blank" 
title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.0 手册</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="版本 9.3.1"
HREF="release-9-3-1.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>&#38468;&#24405; E. 版本说明</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="版本 9.2.18"
HREF="release-9-2-18.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-3"
>E.31. 版本 9.3</A
></H1
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>发布日期: </B
>2013-09-09</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138608"
>E.31.1. 概述</A
></H2
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 9.3中主要的改进包括：</P
><P
></P
><UL
><LI
><P
>添加<A
HREF="sql-creatematerializedview.html"
>物化视图</A
></P
></LI
><LI
><P
>让简单的视图<A
HREF="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS"
>可自动更新</A
></P
></LI
><LI
><P
>为<TT
CLASS="TYPE"
>JSON</TT
>数据类型添加许多特性，包括<A
HREF="functions-json.html"
>操作符和函数</A
>，
从<TT
CLASS="TYPE"
>JSON</TT
>值中提取元素</P
></LI
><LI
><P
>为<TT
CLASS="LITERAL"
>FROM</TT
>子句子查询和函数调用实现了<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>标准的
<A
HREF="queries-table-expressions.html#QUERIES-LATERAL"
><TT
CLASS="LITERAL"
>LATERAL</TT
></A
>选项</P
></LI
><LI
><P
>允许<A
HREF="sql-createforeigndatawrapper.html"
>外部数据封装器</A
>
支持在外部表上书写（插入/更新/删除）</P
></LI
><LI
><P
>添加一个<A
HREF="postgres-fdw.html"
><SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>外部数据封装器</A
>，
允许访问其他<SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>服务器</P
></LI
><LI
><P
>添加对<A
HREF="event-triggers.html"
>事件触发器</A
>的支持</P
></LI
><LI
><P
>添加选择能力到<A
HREF="app-initdb.html#APP-INITDB-DATA-CHECKSUMS"
>checksum</A
>
数据页和报告损坏</P
></LI
><LI
><P
>阻止非键字段行更新阻塞外键检查</P
></LI
><LI
><P
>大大的减少System V <A
HREF="kernel-resources.html#SYSVIPC"
>共享内存</A
>的需求</P
></LI
></UL
><P
>下面的章节是对以上条例更加详细的解释。</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138650"
>E.31.2. 迁移到版本 9.3</A
></H2
><P
>对于那些想要从任何以前的版本中迁移数据的人来说，需要使用
<A
HREF="app-pg-dumpall.html"
><SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
></A
>或
<A
HREF="pgupgrade.html"
><SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
></A
>转储/恢复。</P
><P
>版本9.3包含一些可能影响与以前版本兼容性的修改。观察下列的不兼容性：</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138658"
>E.31.2.1. 服务器设置</A
></H3
><P
></P
><UL
><LI
><P
>重命名<TT
CLASS="VARNAME"
>replication_timeout</TT
>为
<A
HREF="runtime-config-replication.html#GUC-WAL-SENDER-TIMEOUT"
><TT
CLASS="VARNAME"
>wal_sender_timeout</TT
></A
> (Amit Kapila)</P
><P
>这些设置控制<A
HREF="wal.html"
><ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
></A
>发送超时。</P
></LI
><LI
><P
>要求超级用户权限设置<A
HREF="runtime-config-wal.html#GUC-COMMIT-DELAY"
><TT
CLASS="VARNAME"
>commit_delay</TT
></A
>，
因为它现在可以潜在的延迟其他会话 (Simon Riggs)</P
></LI
><LI
><P
>允许内存中排序使用它们分配的所有内存 (Jeff Janes)</P
><P
>基于以前的行为设置<A
HREF="runtime-config-resource.html#GUC-WORK-MEM"
><TT
CLASS="VARNAME"
>work_mem</TT
></A
>
的用户可能需要重新访问该设置。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138678"
>E.31.2.2. 其他</A
></H3
><P
></P
><UL
><LI
><P
>如果一个元组在被更新或删除之前早已被一个<TT
CLASS="LITERAL"
>BEFORE</TT
>触发器更新或删除了，
则抛出一个错误 (Kevin Grittner)</P
><P
>以前，最初的更新默默的跳过了，导致逻辑上的不一致性，因为触发器可能基于计划更新传播数据到其他地方。
现在抛出了一个错误，阻止不一致的结果被提交。如果这个改变影响了你的应用，
那么最好的解决方法通常是移动数据传播动作到一个<TT
CLASS="LITERAL"
>AFTER</TT
>触发器。</P
><P
>如果一个查询中调用了一个不稳定的函数修改了稍后该查询本身修改的行，也会抛出这个错误。
这样的情况以前导致默默的跳过更新。</P
></LI
><LI
><P
>修改多行字段<A
HREF="sql-createtable.html"
><TT
CLASS="LITERAL"
>ON UPDATE SET NULL/SET DEFAULT</TT
></A
>
外键动作，影响该约束的所有字段，不只是那些在<TT
CLASS="COMMAND"
>UPDATE</TT
>中修改了的字段 (Tom Lane)</P
><P
>以前，我们将只设置这些对应于<TT
CLASS="COMMAND"
>UPDATE</TT
>修改过的被引用字段的引用字段。
这是SQL-92要求的，但是最近的SQL标准版本指定了新的行为。</P
></LI
><LI
><P
>如果<A
HREF="runtime-config-client.html#GUC-SEARCH-PATH"
><TT
CLASS="VARNAME"
>search_path</TT
></A
>改变了，
则强制缓存的计划重新规划 (Tom Lane)</P
><P
>以前，如果查询用一个新的<TT
CLASS="VARNAME"
>search_path</TT
>设置重新执行，
那么早已在当前的会话中生成的缓存的计划是不会重做的，导致意外的行为。</P
></LI
><LI
><P
>修复<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_number()</CODE
></A
>，
正确的处理一个句点用作分隔符 (Tom Lane)</P
><P
>以前，一个句点被看做是一个小数点，即使本地说它不是并且使用<TT
CLASS="LITERAL"
>D</TT
>
格式代码声明本地特定的小数点的使用。如果也使用了<TT
CLASS="LITERAL"
>FM</TT
>格式，
那么这会导致错误的答案。</P
></LI
><LI
><P
>修复<TT
CLASS="LITERAL"
>STRICT</TT
>非设置返回函数，让在它们的参数中的设置返回函数正确的返回空行 (Tom Lane)</P
><P
>传递到严格函数的空值应该导致一个空的输出，但是相反的，输出行彻底被压制。</P
></LI
><LI
><P
>在一个连续的流中存储<A
HREF="wal.html"
><ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
></A
>，
而不是每4GB就跳过最后16MB段 (Heikki Linnakangas)</P
><P
>以前，由于这个跳过，以<TT
CLASS="LITERAL"
>FF</TT
>结束名字的<ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
>文件是不使用的。
如果你有<ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
>备份或恢复脚本考虑到这种行为，将需要调整它们。</P
></LI
><LI
><P
>在<A
HREF="catalog-pg-constraint.html"
><TT
CLASS="STRUCTNAME"
>pg_constraint.confmatchtype</TT
></A
>中，
存储缺省的外键匹配类型(non-<TT
CLASS="LITERAL"
>FULL</TT
>, non-<TT
CLASS="LITERAL"
>PARTIAL</TT
>)
为<TT
CLASS="LITERAL"
>s</TT
>，代表<SPAN
CLASS="QUOTE"
>"简单的"</SPAN
> (Tom Lane)</P
><P
>以前这种情况通过<TT
CLASS="LITERAL"
>u</TT
>表示，代表<SPAN
CLASS="QUOTE"
>"未指定"</SPAN
>。</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN138730"
>E.31.3. 修改列表</A
></H2
><P
>下面你将找到<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 9.3和以前的主版本之间详细的变化。</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138734"
>E.31.3.1. 服务器</A
></H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138736"
>E.31.3.1.1. 锁定</A
></H4
><P
></P
><UL
><LI
><P
>阻止非键字段行更新阻塞外键检查 (&Aacute;lvaro Herrera, Noah Misch, Andres Freund, Alexander
        Shulgin, Marti Raudsepp, Alexander Shulgin)</P
><P
>这个修改提高了并发性，并减少了更新的表包含在外键约束中时死锁的可能性。
<TT
CLASS="COMMAND"
>UPDATE</TT
>并不改变任何现在在行上采用新的<TT
CLASS="LITERAL"
>NO KEY UPDATE</TT
>
锁模式的外键中引用的字段，虽然外键约束使用新的<TT
CLASS="LITERAL"
>KEY SHARE</TT
>锁模式，
这与<TT
CLASS="LITERAL"
>NO KEY UPDATE</TT
>并不冲突。所以这里没有阻塞，除非修改了外键字段。</P
></LI
><LI
><P
>添加配置变量<A
HREF="runtime-config-client.html#GUC-LOCK-TIMEOUT"
><TT
CLASS="VARNAME"
>lock_timeout</TT
></A
>，
允许限制一个会话将等待多长时间去请求任何一个锁 (Zolt&aacute;n B&ouml;sz&ouml;rm&eacute;nyi)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138750"
>E.31.3.1.2. 索引</A
></H4
><P
></P
><UL
><LI
><P
>为范围数据类型添加<A
HREF="rangetypes.html#RANGETYPES-INDEXING"
><ACRONYM
CLASS="ACRONYM"
>SP-GiST</ACRONYM
></A
>支持 
(Alexander Korotkov)</P
></LI
><LI
><P
>允许不记录<A
HREF="gist.html"
><ACRONYM
CLASS="ACRONYM"
>GiST</ACRONYM
></A
>索引 (Jeevan Chalke)</P
></LI
><LI
><P
>提高<ACRONYM
CLASS="ACRONYM"
>GiST</ACRONYM
>索引插入的性能，通过有多个同样好的选择时随机化选择页面来实现 
(Heikki Linnakangas)</P
></LI
><LI
><P
>改善哈希索引操作的并发性 (Robert Haas)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138766"
>E.31.3.1.3. 优化程序</A
></H4
><P
></P
><UL
><LI
><P
>为<A
HREF="rangetypes.html"
>范围类型</A
>收集并使用上界、下界和范围长度的直方图
(Alexander Korotkov)</P
></LI
><LI
><P
>为索引访问改善优化器的成本估算 (Tom Lane)</P
></LI
><LI
><P
>为通过散列聚合实现<TT
CLASS="LITERAL"
>DISTINCT</TT
>改善优化器的哈希表尺寸估计 (Tom Lane)</P
></LI
><LI
><P
>抑制非操作符结果并限制规划节点 (Kyotaro Horiguchi, Amit Kapila, Tom Lane)</P
></LI
><LI
><P
>当规划器只关心总的开销时，通过没有保持规划在基本的便宜启动成本上减少规划器开销 (Tom Lane)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138781"
>E.31.3.1.4. 一般性能</A
></H4
><P
></P
><UL
><LI
><P
>添加<A
HREF="sql-copy.html"
><TT
CLASS="COMMAND"
>COPY FREEZE</TT
></A
>选项，
避免稍后标记元组为冻结的开销 (Simon Riggs, Jeff Davis)</P
></LI
><LI
><P
>改善<A
HREF="datatype-numeric.html"
><TT
CLASS="TYPE"
>NUMERIC</TT
></A
>计算的性能
(Kyotaro Horiguchi)</P
></LI
><LI
><P
>改善等待<A
HREF="runtime-config-wal.html#GUC-COMMIT-DELAY"
><TT
CLASS="VARNAME"
>commit_delay</TT
></A
>
的会话的同步 (Peter Geoghegan)</P
><P
>这大大的提高了<TT
CLASS="VARNAME"
>commit_delay</TT
>的有效性。</P
></LI
><LI
><P
>通过不要截断还未接触任何临时表的事务中的临时表，提高<A
HREF="sql-createtable.html"
><TT
CLASS="COMMAND"
>CREATE TEMPORARY TABLE ... ON
        COMMIT DELETE ROWS</TT
></A
>选项的性能 (Heikki Linnakangas)</P
></LI
><LI
><P
>让清理在删除过期的元组之后重新检查可见性 (Pavan Deolasee)</P
><P
>这提高了页面被标记为所有可见的可能性。</P
></LI
><LI
><P
>添加每资源所有者锁缓存 (Jeff Janes)</P
><P
>这加速了持有多个锁的多语句事务中语句完成时的锁统计；
这对于<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>尤其有用。</P
></LI
><LI
><P
>避免在一个创建新的关系的事务提交时扫描整个关系缓存 (Jeff Janes)</P
><P
>这加速了在连续的小事务中创建许多表的会话，比如运行一个<SPAN
CLASS="APPLICATION"
>pg_restore</SPAN
> 。</P
></LI
><LI
><P
>提高删除许多关系的事务的性能 (Tomas Vondra)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138815"
>E.31.3.1.5. 监视</A
></H4
><P
></P
><UL
><LI
><P
>添加可选的能力到<A
HREF="app-initdb.html#APP-INITDB-DATA-CHECKSUMS"
>checksum</A
>
数据页并报告损坏 (Simon Riggs, Jeff Davis, Greg Smith, Ants Aasma)</P
><P
>checksum选项可以在<A
HREF="app-initdb.html"
>initdb</A
>期间设置。</P
></LI
><LI
><P
>分离<A
HREF="monitoring-stats.html"
>统计收集器</A
>的数据文件到独立的全局和每数据库文件
(Tomas Vondra)</P
><P
>这减少了统计数据追踪的I/O需求。</P
></LI
><LI
><P
>修复统计收集器，以便在系统时钟倒退的情况下正确的操作 (Tom Lane)</P
><P
>以前，统计收集器会停止，直到时间再次到达最后记录的时间。</P
></LI
><LI
><P
>当我们想要在这里停止记录时，发出一个告知性的消息到主进程标准错误 (Tom Lane)</P
><P
>这会帮助用户减少在主进程启动期间只记录标准错误的常见配置中，在哪里查看日志输出的混淆。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138833"
>E.31.3.1.6. 认证</A
></H4
><P
></P
><UL
><LI
><P
>当发生认证失败时，记录相关的<A
HREF="auth-pg-hba-conf.html"
><TT
CLASS="FILENAME"
>pg_hba.conf</TT
></A
>行，
简化意外失败的调试 (Magnus Hagander)</P
></LI
><LI
><P
>改进<A
HREF="auth-methods.html#AUTH-LDAP"
><ACRONYM
CLASS="ACRONYM"
>LDAP</ACRONYM
></A
>错误报告和文档 (Peter Eisentraut)</P
></LI
><LI
><P
>在<ACRONYM
CLASS="ACRONYM"
>URL</ACRONYM
>格式中添加对指定<ACRONYM
CLASS="ACRONYM"
>LDAP</ACRONYM
>认证参数的支持，每RFC 4516 (Peter Eisentraut)</P
></LI
><LI
><P
>修改<A
HREF="runtime-config-connection.html#GUC-SSL-CIPHERS"
><TT
CLASS="VARNAME"
>ssl_ciphers</TT
></A
>参数，
以<TT
CLASS="LITERAL"
>DEFAULT</TT
>启动，而不是以<TT
CLASS="LITERAL"
>ALL</TT
>启动，
然后删除不安全的密码 (Magnus Hagander)</P
><P
>这会产生一个更合适的SSL密码设置。</P
></LI
><LI
><P
>分析并加载<A
HREF="auth-username-maps.html"
><TT
CLASS="FILENAME"
>pg_ident.conf</TT
></A
>一次，
而不是在每个连接中 (Amit Kapila)</P
><P
>这类似于<TT
CLASS="FILENAME"
>pg_hba.conf</TT
>的处理。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN138861"
>E.31.3.1.7. 服务器设置</A
></H4
><P
></P
><UL
><LI
><P
>大大的减少了System V <A
HREF="kernel-resources.html#SYSVIPC"
>共享内存</A
>的需求 (Robert Haas)</P
><P
>在类Unix的系统上，<CODE
CLASS="FUNCTION"
>mmap()</CODE
>现在用于大多数<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>
的共享内存。对于大多数用户，这将消除任何为共享内存调整内核参数的需要。</P
></LI
><LI
><P
>允许主进程监听多个Unix域套接字 (Honza Hor&aacute;k)</P
><P
>配置参数<TT
CLASS="VARNAME"
>unix_socket_directory</TT
>被
<A
HREF="runtime-config-connection.html#GUC-UNIX-SOCKET-DIRECTORIES"
><TT
CLASS="VARNAME"
>unix_socket_directories</TT
></A
>
取代，它接受一个路径列表。</P
></LI
><LI
><P
>允许配置文件的路径被处理 (Magnus Hagander, Greg Smith, Selena Deckelmann)</P
><P
>这样一个路径在服务器配置文件中用
<A
HREF="config-setting.html#CONFIG-INCLUDES"
><TT
CLASS="VARNAME"
>include_dir</TT
></A
>指定。</P
></LI
><LI
><P
>为<A
HREF="runtime-config-resource.html#GUC-SHARED-BUFFERS"
><TT
CLASS="VARNAME"
>shared_buffers</TT
></A
>
增加最大<A
HREF="app-initdb.html"
>initdb</A
>配置值到128MB (Robert Haas)</P
><P
>这是initdb打算在<A
HREF="config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE"
><TT
CLASS="FILENAME"
>postgresql.conf</TT
></A
>
中设置的最大值；以前的最大值是32MB。</P
></LI
><LI
><P
>在主进程退出时，删除<A
HREF="runtime-config-file-locations.html#GUC-EXTERNAL-PID-FILE"
>外部<ACRONYM
CLASS="ACRONYM"
>PID</ACRONYM
>文件</A
>，
如果有 (Peter Eisentraut)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138893"
>E.31.3.2. 复制和恢复</A
></H3
><P
></P
><UL
><LI
><P
>允许流复制备用<A
HREF="protocol-replication.html"
>遵循时间线切换</A
> (Heikki Linnakangas)</P
><P
>这允许流备用服务器从一个新晋升为主要地位的伺服接受WAL数据。以前，
其他备用会请求重新同步以开始跟随新的主机。</P
></LI
><LI
><P
>添加<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>函数<A
HREF="functions-admin.html#FUNCTIONS-ADMIN-BACKUP"
><CODE
CLASS="FUNCTION"
>pg_is_in_backup()</CODE
></A
>
和<A
HREF="functions-admin.html#FUNCTIONS-ADMIN-BACKUP"
><CODE
CLASS="FUNCTION"
>pg_backup_start_time()</CODE
></A
> 
(Gilles Darold)</P
><P
>这些函数报告基础备份的状态。</P
></LI
><LI
><P
>提高<A
HREF="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"
><TT
CLASS="VARNAME"
>synchronous_commit</TT
></A
>
禁用时流日志切换的性能 (Andres Freund)</P
></LI
><LI
><P
>允许更快的晋升流备用为主服务器 (Simon Riggs, Kyotaro Horiguchi)</P
></LI
><LI
><P
>添加最后检查点的重做位置到
<A
HREF="app-pgcontroldata.html"
><SPAN
CLASS="APPLICATION"
>pg_controldata</SPAN
></A
>
的输出 (Fujii Masao)</P
><P
>这个信息对于确定恢复需要哪个<ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
>文件是有帮助的。</P
></LI
><LI
><P
>允许像<A
HREF="app-pgreceivexlog.html"
><SPAN
CLASS="APPLICATION"
>pg_receivexlog</SPAN
></A
>
这样的工具用不同的架构在计算机上运行 (Heikki Linnakangas)</P
><P
>WAL文件仍然只能以原先相同的架构在服务器上重放；但是他们现在可以以任意架构在机器上传输和存储，
因为流复制协议现在是与机器无关的。</P
></LI
><LI
><P
>让<A
HREF="app-pgbasebackup.html"
><SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
></A
> 
<TT
CLASS="OPTION"
>--write-recovery-conf</TT
>输出一个最小的<TT
CLASS="FILENAME"
>recovery.conf</TT
>文件
(Zolt&aacute;n B&ouml;sz&ouml;rm&eacute;nyi, Magnus Hagander)</P
><P
>这简化了设置一个备用服务器。</P
></LI
><LI
><P
>允许<A
HREF="app-pgreceivexlog.html"
><SPAN
CLASS="APPLICATION"
>pg_receivexlog</SPAN
></A
>
和<A
HREF="app-pgbasebackup.html"
><SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
></A
> 
<TT
CLASS="OPTION"
>--xlog-method</TT
>处理流时间线切换 (Heikki Linnakangas)</P
></LI
><LI
><P
>添加<A
HREF="runtime-config-replication.html#GUC-WAL-RECEIVER-TIMEOUT"
><TT
CLASS="VARNAME"
>wal_receiver_timeout</TT
></A
>
参数控制<ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
>接收器的超时 (Amit Kapila)</P
><P
>这允许更快速的检测连接失败。</P
></LI
><LI
><P
>改变<A
HREF="wal.html"
><ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
></A
>记录格式，
以允许跨页面分离记录头 (Heikki Linnakangas)</P
><P
>新的格式更紧凑，并且书写更有效。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138950"
>E.31.3.3. 查询</A
></H3
><P
></P
><UL
><LI
><P
>为<TT
CLASS="LITERAL"
>FROM</TT
>子句子查询和函数调用实现<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>标准的
<A
HREF="queries-table-expressions.html#QUERIES-LATERAL"
><TT
CLASS="LITERAL"
>LATERAL</TT
></A
>选项 (Tom Lane)</P
><P
>这个特性允许<TT
CLASS="LITERAL"
>FROM</TT
>中的子查询和函数从<TT
CLASS="LITERAL"
>FROM</TT
>子句中的其他表中引用字段。
<TT
CLASS="LITERAL"
>LATERAL</TT
>关键字对于函数来说是可选的。</P
></LI
><LI
><P
>添加对输送<A
HREF="sql-copy.html"
><TT
CLASS="COMMAND"
>COPY</TT
></A
>和
<A
HREF="app-psql.html"
><SPAN
CLASS="APPLICATION"
>psql</SPAN
></A
> <TT
CLASS="COMMAND"
>\copy</TT
>
数据到/从一个外部程序的支持 (Etsuro Fujita)</P
></LI
><LI
><P
>允许规则中的一个多行<A
HREF="sql-values.html"
><TT
CLASS="LITERAL"
>VALUES</TT
></A
>
子句引用<TT
CLASS="LITERAL"
>OLD</TT
>/<TT
CLASS="LITERAL"
>NEW</TT
> (Tom Lane)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN138976"
>E.31.3.4. 对象操作</A
></H3
><P
></P
><UL
><LI
><P
>添加对<A
HREF="event-triggers.html"
>事件触发器</A
>的支持 
(Dimitri Fontaine, Robert Haas, &Aacute;lvaro Herrera)</P
><P
>这允许DDL命令运行时，以启用事件的语言书写的服务器端的函数被调用。</P
></LI
><LI
><P
>允许<A
HREF="sql-createforeigndatawrapper.html"
>外部数据封装器</A
>
支持在外部表上写入（插入/更新/删除） (KaiGai Kohei)</P
></LI
><LI
><P
>添加<A
HREF="sql-createschema.html"
><TT
CLASS="COMMAND"
>CREATE SCHEMA ... IF NOT EXISTS</TT
></A
>
子句 (Fabr&iacute;zio de Royes Mello)</P
></LI
><LI
><P
>让<A
HREF="sql-reassign-owned.html"
><TT
CLASS="COMMAND"
>REASSIGN OWNED</TT
></A
>
也修改共享对象的所有权 (&Aacute;lvaro Herrera)</P
></LI
><LI
><P
>如果给定的初始值字符串对于事务数据类型来说不是有效的输入，
那么让<A
HREF="sql-createaggregate.html"
><TT
CLASS="COMMAND"
>CREATE AGGREGATE</TT
></A
>
投诉 (Tom Lane)</P
></LI
><LI
><P
>抑制<A
HREF="sql-createtable.html"
><TT
CLASS="COMMAND"
>CREATE TABLE</TT
></A
>
关于隐式索引和序列创建的消息 (Robert Haas)</P
><P
>这些消息现在在<TT
CLASS="LITERAL"
>DEBUG1</TT
>冗长模式中出现，所以它们缺省将不显示。</P
></LI
><LI
><P
>当一个不存在的模式在表名中指定时，允许
<A
HREF="sql-droptable.html"
><TT
CLASS="COMMAND"
>DROP TABLE IF EXISTS</TT
></A
>成功 (Bruce Momjian)</P
><P
>以前，如果该模式不存在，它抛出一个错误。</P
></LI
><LI
><P
>提供带有<A
HREF="libpq-exec.html#LIBPQ-PQRESULTERRORFIELD"
>约束违反细节</A
>
的客户端作为单独的字段 (Pavel Stehule)</P
><P
>这允许客户端检索表、字段、数据类型或约束名错误细节。以前这样的信息必须从错误字符串中提取。
客户端库支持需要访问这些字段。</P
></LI
></UL
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139013"
>E.31.3.4.1. <TT
CLASS="COMMAND"
>ALTER</TT
></A
></H4
><P
></P
><UL
><LI
><P
>在<A
HREF="sql-altertype.html"
><TT
CLASS="COMMAND"
>ALTER TYPE ... ADD VALUE</TT
></A
>
中支持<TT
CLASS="LITERAL"
>IF NOT EXISTS</TT
>选项 (Andrew Dunstan)</P
><P
>这对于有条件的添加值到枚举类型是有用的。</P
></LI
><LI
><P
>添加<A
HREF="sql-alterrole.html"
><TT
CLASS="COMMAND"
>ALTER ROLE ALL SET</TT
></A
>
为所有用户建立设置 (Peter Eisentraut)</P
><P
>这允许设置应用到所有数据库中的所有用户。
<A
HREF="sql-alterdatabase.html"
><TT
CLASS="COMMAND"
>ALTER DATABASE SET</TT
></A
>
早已允许在单个数据库中为所有用户添加设置。<TT
CLASS="FILENAME"
>postgresql.conf</TT
>
也有类似作用。</P
></LI
><LI
><P
>为<A
HREF="sql-alterrule.html"
><TT
CLASS="COMMAND"
>ALTER RULE ... RENAME</TT
></A
>
添加支持 (Ali Dar)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139035"
>E.31.3.4.2. <A
HREF="rules-views.html"
><TT
CLASS="COMMAND"
>VIEWs</TT
></A
></A
></H4
><P
></P
><UL
><LI
><P
>添加<A
HREF="sql-creatematerializedview.html"
>物化视图</A
> (Kevin Grittner)</P
><P
>不像普通视图，基础表是读取每个访问的，物化视图在创建或刷新时创建物理表。
访问物化视图然后从它的物理表中读取。
现在还没有任何增量刷新物化视图或通过基础表访问自动访问它们的便利。</P
></LI
><LI
><P
>让简单视图<A
HREF="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS"
>自动可更新</A
> (Dean Rasheed)</P
><P
>从一个基础表中引用一些或所有字段的简单视图现在缺省是可更新的。
更复杂的视图可以使用<A
HREF="sql-createtrigger.html"
><TT
CLASS="LITERAL"
>INSTEAD OF</TT
></A
>
触发器或<A
HREF="sql-createrule.html"
><TT
CLASS="LITERAL"
>INSTEAD</TT
></A
>规则使其可更新。</P
></LI
><LI
><P
>添加<A
HREF="sql-createview.html"
><TT
CLASS="COMMAND"
>CREATE RECURSIVE VIEW</TT
></A
>语法 
(Peter Eisentraut)</P
><P
>内部的，这些翻译为<TT
CLASS="COMMAND"
>CREATE VIEW ... WITH RECURSIVE ...</TT
>。</P
></LI
><LI
><P
>改善视图/规则打印代码，以处理引用的表重命名或字段重命名、添加或删除了的情况 (Tom Lane)</P
><P
>表和字段重命名会产生的情况是：如果我们只是替代新的名称为一个规则或视图的原始文本，
那么结果是有歧义的。这个修改修复了规则转储代码，当需要保存原来的语义时，
插入手动制作的表和字段别名。</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139061"
>E.31.3.5. 数据类型</A
></H3
><P
></P
><UL
><LI
><P
>增加<A
HREF="largeobjects.html"
>大对象</A
>的最大尺寸从2GB到4TB (Nozomi Anzai, Yugo Nagata)</P
><P
>这个修改包括添加64位大对象访问功能，在服务器中和libpq中。</P
></LI
><LI
><P
>允许文本的<A
HREF="datatype-datetime.html#DATATYPE-TIMEZONES"
>时区名称</A
>，比如，
<SPAN
CLASS="QUOTE"
>"America/Chicago"</SPAN
>，在<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>格式的<TT
CLASS="TYPE"
>timestamptz</TT
>
输入的<SPAN
CLASS="QUOTE"
>"T"</SPAN
>字段中 (Bruce Momjian)</P
></LI
></UL
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139075"
>E.31.3.5.1. <A
HREF="datatype-json.html"
><TT
CLASS="TYPE"
>JSON</TT
></A
></A
></H4
><P
></P
><UL
><LI
><P
>添加<A
HREF="functions-json.html"
>操作符和函数</A
>从<TT
CLASS="TYPE"
>JSON</TT
>
值中提取元素 (Andrew Dunstan)</P
></LI
><LI
><P
>允许<TT
CLASS="TYPE"
>JSON</TT
>值被<A
HREF="functions-json.html"
>转换为记录</A
>
(Andrew Dunstan)</P
></LI
><LI
><P
>添加<A
HREF="functions-json.html"
>函数</A
>转换标量、记录和<TT
CLASS="TYPE"
>hstore</TT
>
值为<TT
CLASS="TYPE"
>JSON</TT
> (Andrew Dunstan)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139093"
>E.31.3.6. 函数</A
></H3
><P
></P
><UL
><LI
><P
>添加<A
HREF="functions-array.html#ARRAY-FUNCTIONS-TABLE"
><CODE
CLASS="FUNCTION"
>array_remove()</CODE
></A
>
和<A
HREF="functions-array.html#ARRAY-FUNCTIONS-TABLE"
><CODE
CLASS="FUNCTION"
>array_replace()</CODE
></A
>
函数 (Marco Nenciarini, Gabriele Bartolini)</P
></LI
><LI
><P
>允许<A
HREF="functions-string.html#FUNCTIONS-STRING-OTHER"
><CODE
CLASS="FUNCTION"
>concat()</CODE
></A
>
和<A
HREF="functions-string.html#FUNCTIONS-STRING-FORMAT"
><CODE
CLASS="FUNCTION"
>format()</CODE
></A
>
正确的扩展<TT
CLASS="LITERAL"
>VARIADIC</TT
>标签的参数 (Pavel Stehule)</P
></LI
><LI
><P
>改进<A
HREF="functions-string.html#FUNCTIONS-STRING-FORMAT"
><CODE
CLASS="FUNCTION"
>format()</CODE
></A
>，
提供字段宽度和左/右对齐选项 (Pavel Stehule)</P
></LI
><LI
><P
>让<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_char()</CODE
></A
>,
<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_date()</CODE
></A
>,
和<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_timestamp()</CODE
></A
>
正确的处理负的世纪值(BC) (Bruce Momjian)</P
><P
>以前，该行为不是错误就是与正的/<ACRONYM
CLASS="ACRONYM"
>AD</ACRONYM
>处理不一致，比如，
格式标记<SPAN
CLASS="QUOTE"
>"IYYY-IW-DY"</SPAN
>。</P
></LI
><LI
><P
>让<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_date()</CODE
></A
>
和<A
HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE"
><CODE
CLASS="FUNCTION"
>to_timestamp()</CODE
></A
>
在混合<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>和Gregorian周/天命名时返回正确的结果 (Bruce Momjian)</P
></LI
><LI
><P
>在每个<TT
CLASS="LITERAL"
>SELECT</TT
>目标列表项和<TT
CLASS="LITERAL"
>FROM</TT
>项之后，
让<A
HREF="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef()</CODE
></A
>
缺省开始一个新行 (Marko Tiikkaja)</P
><P
>这减少了视图打印中的线段长度，例如在<A
HREF="app-pgdump.html"
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
></A
>
的输出中。</P
></LI
><LI
><P
>修复<CODE
CLASS="FUNCTION"
>map_sql_value_to_xml_value()</CODE
>，以与基础类型相同的打印方式，
打印域类型的值 (Pavel Stehule)</P
><P
>对于某些内建类型，比如<TT
CLASS="TYPE"
>boolean</TT
>，有特殊的格式规则；
这些规则现在也应用到这些类型上的域。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139145"
>E.31.3.7. 服务器端的语言</A
></H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139147"
>E.31.3.7.1. <A
HREF="plpgsql.html"
>PL/pgSQL</A
>服务器端语言</A
></H4
><P
></P
><UL
><LI
><P
>允许PL/pgSQL使用带有复合类型表达式的<TT
CLASS="LITERAL"
>RETURN</TT
> (Asif Rehman)</P
><P
>以前，在一个返回复合类型的函数中，<TT
CLASS="LITERAL"
>RETURN</TT
>只能引用一个复合类型的变量。</P
></LI
><LI
><P
>允许PL/pgSQL作为单独的字段存取<A
HREF="plpgsql-control-structures.html#PLPGSQL-EXCEPTION-DIAGNOSTICS"
>约束违反细节</A
>
 (Pavel Stehule)</P
></LI
><LI
><P
>允许PL/pgSQL访问<A
HREF="sql-copy.html"
><TT
CLASS="COMMAND"
>COPY</TT
></A
>
处理的行数 (Pavel Stehule)</P
><P
>PL/pgSQL函数中执行的<TT
CLASS="COMMAND"
>COPY</TT
>现在更新通过
<A
HREF="plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS"
><TT
CLASS="COMMAND"
>GET DIAGNOSTICS x = ROW_COUNT</TT
></A
>
恢复的值。</P
></LI
><LI
><P
>允许未保留的关键字用作PL/pgSQL中的标识符 (Tom Lane)</P
><P
>在PL/pgSQL语法中的某些地方，关键字必须加引号用作标识符，即使它们名义上是未保留的。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139170"
>E.31.3.7.2. <A
HREF="plpython.html"
>PL/Python</A
>服务器端语言</A
></H4
><P
></P
><UL
><LI
><P
>添加PL/Python结果对象字符串处理器 (Peter Eisentraut)</P
><P
>这允许<TT
CLASS="LITERAL"
>plpy.debug(rv)</TT
>输出合理的东西。</P
></LI
><LI
><P
>让PL/Python转化OID值为一个适当的Python数值类型 (Peter Eisentraut)</P
></LI
><LI
><P
>处理和内部<ACRONYM
CLASS="ACRONYM"
>SPI</ACRONYM
>错误一样明确发生(用PL/Python的<TT
CLASS="LITERAL"
>RAISE</TT
>)
的<A
HREF="spi.html"
><ACRONYM
CLASS="ACRONYM"
>SPI</ACRONYM
></A
>错误 (Oskari Saarenmaa and Jan Urbanski)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139186"
>E.31.3.8. 服务器编程接口(<A
HREF="spi.html"
>SPI</A
>)</A
></H3
><P
></P
><UL
><LI
><P
>阻止<ACRONYM
CLASS="ACRONYM"
>SPI</ACRONYM
>元组表在子事务退出期间泄露 (Tom Lane)</P
><P
>在任何失败的子事务的结尾，内核SPI代码现在释放任何在该子事务期间创建的SPI元组表。
这避免了对使用SPI代码的需要，保持在错误恢复代码中追踪这样的元组表和手动释放它们。
未能这样做会在PL/pgSQL和可能其他SPI客户端中导致一些事物寿命内存泄露问题。
<A
HREF="spi-spi-freetupletable.html"
><CODE
CLASS="FUNCTION"
>SPI_freetuptable()</CODE
></A
>
现在保护自己免受多次释放请求，所以任何现有代码需要小心清理，
不应该被这个修改破坏。</P
></LI
><LI
><P
>允许<ACRONYM
CLASS="ACRONYM"
>SPI</ACRONYM
>函数访问被<A
HREF="sql-copy.html"
><TT
CLASS="COMMAND"
>COPY</TT
></A
>
处理的行数 (Pavel Stehule)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139201"
>E.31.3.9. 客户端应用</A
></H3
><P
></P
><UL
><LI
><P
>添加命令行工具<A
HREF="app-pg-isready.html"
><SPAN
CLASS="APPLICATION"
>pg_isready</SPAN
></A
>，
检查服务器是否准备好了接受连接 (Phil Sorber)</P
></LI
><LI
><P
>为<A
HREF="app-pgrestore.html"
><SPAN
CLASS="APPLICATION"
>pg_restore</SPAN
></A
>,
<A
HREF="app-clusterdb.html"
><SPAN
CLASS="APPLICATION"
>clusterdb</SPAN
></A
>,
<A
HREF="app-reindexdb.html"
><SPAN
CLASS="APPLICATION"
>reindexdb</SPAN
></A
>,
和<A
HREF="app-vacuumdb.html"
><SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
></A
>
支持多个<TT
CLASS="OPTION"
>--table</TT
>参数 (Josh Kupershmidt)</P
><P
>这类似于<A
HREF="app-pgdump.html"
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
></A
>的<TT
CLASS="OPTION"
>--table</TT
>
选项的工作方式。</P
></LI
><LI
><P
>添加<TT
CLASS="OPTION"
>--dbname</TT
>选项到
<A
HREF="app-pg-dumpall.html"
><SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
></A
>, 
<A
HREF="app-pgbasebackup.html"
><SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
></A
>, 
和<A
HREF="app-pgreceivexlog.html"
><SPAN
CLASS="APPLICATION"
>pg_receivexlog</SPAN
></A
>，
允许指定一个连接字符串 (Amit Kapila)</P
></LI
><LI
><P
>添加libpq函数<A
HREF="libpq-connect.html#LIBPQ-PQCONNINFO"
><CODE
CLASS="FUNCTION"
>PQconninfo()</CODE
></A
>，
返回连接信息 (Zolt&aacute;n B&ouml;sz&ouml;rm&eacute;nyi, Magnus Hagander)</P
></LI
></UL
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139236"
>E.31.3.9.1. <A
HREF="app-psql.html"
><SPAN
CLASS="APPLICATION"
>psql</SPAN
></A
></A
></H4
><P
></P
><UL
><LI
><P
>调整函数开销设置，这样<SPAN
CLASS="APPLICATION"
>psql</SPAN
>选项卡实现和模式搜索更有效 (Tom Lane)</P
></LI
><LI
><P
>提高<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的选项卡实现覆盖(Jeff Janes, Dean Rasheed, 
Peter Eisentraut, Magnus Hagander)</P
></LI
><LI
><P
>允许<SPAN
CLASS="APPLICATION"
>psql</SPAN
> <TT
CLASS="OPTION"
>--single-transaction</TT
>
模式在从标准输入中读取时工作 (Fabien Coelho, Robert Haas)</P
><P
>以前这个选项只在从一个文件中读取时工作。</P
></LI
><LI
><P
>当连接到一个老的服务器时，删除<SPAN
CLASS="APPLICATION"
>psql</SPAN
>警告 (Peter Eisentraut)</P
><P
>当连接到一个比<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的主版本更新的服务器时，仍然发出一个警告。</P
></LI
></UL
><DIV
CLASS="SECT5"
><H5
CLASS="SECT5"
><A
NAME="AEN139257"
>E.31.3.9.1.1. <A
HREF="app-psql.html#APP-PSQL-META-COMMANDS"
>反斜杠命令</A
></A
></H5
><P
></P
><UL
><LI
><P
>添加<SPAN
CLASS="APPLICATION"
>psql</SPAN
>命令<TT
CLASS="COMMAND"
>\watch</TT
>，重复的执行一个SQL命令 (Will Leinweber)</P
></LI
><LI
><P
>添加<SPAN
CLASS="APPLICATION"
>psql</SPAN
>命令<TT
CLASS="COMMAND"
>\gset</TT
>，
在<SPAN
CLASS="APPLICATION"
>psql</SPAN
>变量中存储查询结果 (Pavel Stehule)</P
></LI
><LI
><P
>添加<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>信息到<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的<TT
CLASS="COMMAND"
>\conninfo</TT
>命令 (Alastair Turner)</P
></LI
><LI
><P
>添加<SPAN
CLASS="QUOTE"
>"Security"</SPAN
>字段到<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的<TT
CLASS="COMMAND"
>\df+</TT
>输出 (Jon Erdman)</P
></LI
><LI
><P
>允许<SPAN
CLASS="APPLICATION"
>psql</SPAN
>命令<TT
CLASS="COMMAND"
>\l</TT
>接受一个数据库名字模式 (Peter Eisentraut)</P
></LI
><LI
><P
>在<SPAN
CLASS="APPLICATION"
>psql</SPAN
>中，如果没有活动的连接，则不允许<TT
CLASS="COMMAND"
>\connect</TT
>
使用缺省 (Bruce Momjian)</P
><P
>如果服务器崩溃可能会出现这种情况。</P
></LI
><LI
><P
>在用<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的<TT
CLASS="LITERAL"
>\g</TT
> <TT
CLASS="REPLACEABLE"
><I
>file</I
></TT
>
SQL命令执行失败之后正确的重置状态 (Tom Lane)</P
><P
>以前，来自随后的SQL命令的输出会意外的继续进行同一个文件。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT5"
><H5
CLASS="SECT5"
><A
NAME="AEN139295"
>E.31.3.9.1.2. 输出</A
></H5
><P
></P
><UL
><LI
><P
>添加一个<TT
CLASS="LITERAL"
>latex-longtable</TT
>输出格式到<SPAN
CLASS="APPLICATION"
>psql</SPAN
> (Bruce Momjian)</P
><P
>这个格式允许表跨越多个页面。</P
></LI
><LI
><P
>添加<TT
CLASS="LITERAL"
>border=3</TT
>输出模式到<SPAN
CLASS="APPLICATION"
>psql</SPAN
> <TT
CLASS="LITERAL"
>latex</TT
>格式 (Bruce Momjian)</P
></LI
><LI
><P
>在<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的仅元组和扩展输出模式中，不再为零行发出<SPAN
CLASS="QUOTE"
>"(No rows)"</SPAN
> 
(Peter Eisentraut)</P
></LI
><LI
><P
>在<SPAN
CLASS="APPLICATION"
>psql</SPAN
>的未对齐、扩展输出模式中，不再为零行输出一个空行 (Peter Eisentraut)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139315"
>E.31.3.9.2. <A
HREF="app-pgdump.html"
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
></A
></A
></H4
><P
></P
><UL
><LI
><P
>添加<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> <TT
CLASS="OPTION"
>--jobs</TT
>选项并行转储表 (Joachim Wieland)</P
></LI
><LI
><P
>让<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>输出函数有一个更加可预见的顺序 (Joel Jacobson)</P
></LI
><LI
><P
>修复<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>发出的tar文件，与<ACRONYM
CLASS="ACRONYM"
>POSIX</ACRONYM
>一致 (Brian Weaver, Tom Lane)</P
></LI
><LI
><P
>添加<TT
CLASS="OPTION"
>--dbname</TT
>选项到<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>，
与其他客户端命令一致 (Heikki Linnakangas)</P
><P
>最后提供的数据库名可能没有标志。</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139336"
>E.31.3.9.3. <A
HREF="app-initdb.html"
><SPAN
CLASS="APPLICATION"
>initdb</SPAN
></A
></A
></H4
><P
></P
><UL
><LI
><P
>让initdb同步最近创建的数据目录 (Jeff Davis)</P
><P
>这确保了在initdb之后很快系统崩溃情况下的数据完整性。
可以使用<TT
CLASS="OPTION"
>--nosync</TT
>禁用此功能。</P
></LI
><LI
><P
>添加initdb <TT
CLASS="OPTION"
>--sync-only</TT
>选项同步数据目录到持久存储 (Bruce Momjian)</P
><P
>这是通过<A
HREF="pgupgrade.html"
><SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
></A
>使用的。</P
></LI
><LI
><P
>在文件系统的挂载点上放置数据目录时，让initdb发出一个警告 (Bruce Momjian)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139353"
>E.31.3.10. 源代码</A
></H3
><P
></P
><UL
><LI
><P
>添加基础设施以允许插件<A
HREF="bgworker.html"
>后端工作进程</A
> (&Aacute;lvaro Herrera)</P
></LI
><LI
><P
>创建一个集中的超时<ACRONYM
CLASS="ACRONYM"
>API</ACRONYM
> (Zolt&aacute;n B&ouml;sz&ouml;rm&eacute;nyi)</P
></LI
><LI
><P
>创建libpgcommon并删除这里的<CODE
CLASS="FUNCTION"
>pg_malloc()</CODE
>和其他函数 
(&Aacute;lvaro Herrera, Andres Freund)</P
><P
>这允许libpgport只用于可移植性相关的代码。</P
></LI
><LI
><P
>为嵌入在较大结构内的列表连接添加支持 (Andres Freund)</P
></LI
><LI
><P
>为所有信号使用<TT
CLASS="LITERAL"
>SA_RESTART</TT
>，包括<TT
CLASS="LITERAL"
>SIGALRM</TT
> (Tom Lane)</P
></LI
><LI
><P
>确保在翻译<CODE
CLASS="FUNCTION"
>errcontext()</CODE
>消息时使用了正确的文本域 (Heikki Linnakangas)</P
></LI
><LI
><P
>标准化命名客户端侧的内存分配函数 (Tom Lane)</P
></LI
><LI
><P
>如果某些编译时常量条件不符合，那么为<SPAN
CLASS="QUOTE"
>"静态断言"</SPAN
>
提供支持将会在编译时失败 (Andres Freund, Tom Lane)</P
></LI
><LI
><P
>在客户端侧代码中支持<CODE
CLASS="FUNCTION"
>Assert()</CODE
> (Andrew Dunstan)</P
></LI
><LI
><P
>添加修饰以通知C编译器一些<CODE
CLASS="FUNCTION"
>ereport()</CODE
>和<CODE
CLASS="FUNCTION"
>elog()</CODE
>调用不返回
(Peter Eisentraut, Andres Freund, Tom Lane, Heikki Linnakangas)</P
></LI
><LI
><P
>允许选项通过<A
HREF="regress-evaluation.html"
><TT
CLASS="ENVAR"
>PG_REGRESS_DIFF_OPTS</TT
></A
>
传递到回归测试输出比较工具中 (Peter Eisentraut)</P
></LI
><LI
><P
>为<A
HREF="sql-createindex.html"
><TT
CLASS="COMMAND"
>CREATE INDEX CONCURRENTLY</TT
></A
>
添加隔离测试 (Abhijit Menon-Sen)</P
></LI
><LI
><P
>删除类型定义<TT
CLASS="TYPE"
>int2</TT
>/<TT
CLASS="TYPE"
>int4</TT
>，因为他们更好的表现为
<TT
CLASS="TYPE"
>int16</TT
>/<TT
CLASS="TYPE"
>int32</TT
> (Peter Eisentraut)</P
></LI
><LI
><P
>修复Mac <SPAN
CLASS="PRODUCTNAME"
>OS X</SPAN
>上的<A
HREF="install-procedure.html#INSTALL"
>install-strip</A
> (Peter Eisentraut)</P
></LI
><LI
><P
>删除<A
HREF="install-procedure.html#CONFIGURE"
>configure</A
>标志<TT
CLASS="OPTION"
>--disable-shared</TT
>，
因为不再支持它了 (Bruce Momjian)</P
></LI
><LI
><P
>在<SPAN
CLASS="APPLICATION"
>Perl</SPAN
>中重写pgindent (Andrew Dunstan)</P
></LI
><LI
><P
>提供Emacs宏设置Perl格式匹配<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>的perltidy设置 (Peter Eisentraut)</P
></LI
><LI
><P
>运行工具检查关键字列表，查看何时后端语法发生了改变 (Tom Lane)</P
></LI
><LI
><P
>改变<TT
CLASS="LITERAL"
>UESCAPE</TT
> lex的方式，大大的减少了词法分析程序表的大小 (Heikki Linnakangas)</P
></LI
><LI
><P
>集中<SPAN
CLASS="APPLICATION"
>flex</SPAN
>和<SPAN
CLASS="APPLICATION"
>bison</SPAN
> <SPAN
CLASS="APPLICATION"
>make</SPAN
>规则 (Peter Eisentraut)</P
><P
>这对于<SPAN
CLASS="APPLICATION"
>pgxs</SPAN
>作者是有用的。</P
></LI
><LI
><P
>修改许多内部后端函数，返回对象<TT
CLASS="TYPE"
>OID</TT
>而不是空 (Dimitri Fontaine)</P
><P
>这对于事件触发器是有用的。</P
></LI
><LI
><P
>为事务回调构造pre-commit/pre-prepare/pre-subcommit事件 (Tom Lane)</P
><P
>使用事务回调的可加载模块可能需要修改，以处理这些新的事件类型。</P
></LI
><LI
><P
>添加函数<A
HREF="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE"
><CODE
CLASS="FUNCTION"
>pg_identify_object()</CODE
></A
>，
生产一个机器可读的数据库对象的描述 (&Aacute;lvaro Herrera)</P
></LI
><LI
><P
>添加在<TT
CLASS="COMMAND"
>ALTER</TT
>对象之后的服务器挂钩 (KaiGai Kohei)</P
></LI
><LI
><P
>实现一个通用二进制堆并将它用于合并附加操作 (Abhijit Menon-Sen)</P
></LI
><LI
><P
>提供一个工具在更新<TT
CLASS="FILENAME"
>src/timezone/data</TT
>文件时，帮助检测时区缩写改变 (Tom Lane)</P
></LI
><LI
><P
>为<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>和<SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>库添加<SPAN
CLASS="APPLICATION"
>pkg-config</SPAN
>支持
(Peter Eisentraut)</P
></LI
><LI
><P
>删除<TT
CLASS="FILENAME"
>src/tools/backend</TT
>，因为该内容在<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> wiki上 
(Bruce Momjian)</P
></LI
><LI
><P
>分离<A
HREF="wal.html"
><ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
></A
>读取作为一个独立的设施
(Heikki Linnakangas, Andres Freund)</P
></LI
><LI
><P
>使用64位整数表示<A
HREF="wal.html"
><ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
></A
>位置(<TT
CLASS="STRUCTNAME"
>XLogRecPtr</TT
>)，
替代两个32位的整数 (Heikki Linnakangas)</P
><P
>通常，需要读取<ACRONYM
CLASS="ACRONYM"
>WAL</ACRONYM
>格式的工具将需要调整。</P
></LI
><LI
><P
>允许<A
HREF="plpython.html"
>PL/Python</A
>支持平台特定的包含路径 (Peter Eisentraut)</P
></LI
><LI
><P
>允许<SPAN
CLASS="PRODUCTNAME"
>OS X</SPAN
>上的<A
HREF="plpython.html"
>PL/Python</A
>
建立<SPAN
CLASS="APPLICATION"
>Python</SPAN
>的定制版本 (Peter Eisentraut)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139474"
>E.31.3.11. 附加的模块</A
></H3
><P
></P
><UL
><LI
><P
>添加一个<A
HREF="postgres-fdw.html"
><SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>外部数据封装器</A
>
贡献模块，以允许访问其他<SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>服务器 (Shigeru Hanada)</P
><P
>这个外部数据封装器支持写。</P
></LI
><LI
><P
>添加<A
HREF="pgxlogdump.html"
><SPAN
CLASS="APPLICATION"
>pg_xlogdump</SPAN
></A
>贡献程序 (Andres Freund)</P
></LI
><LI
><P
>添加对在<A
HREF="pgtrgm.html"
><SPAN
CLASS="PRODUCTNAME"
>pg_trgm</SPAN
></A
>中索引正则表达式搜索的支持
(Alexander Korotkov)</P
></LI
><LI
><P
>改善<A
HREF="pgtrgm.html"
><SPAN
CLASS="PRODUCTNAME"
>pg_trgm</SPAN
></A
>对多字节字符的处理 (Tom Lane)</P
><P
>在一个没有wcstombs()或towlower()库函数的平台上，这会导致<SPAN
CLASS="PRODUCTNAME"
>pg_trgm</SPAN
>
索引内容中非ASCII数据的不兼容的改变。在这样的情况下，<TT
CLASS="COMMAND"
>REINDEX</TT
>
这些索引以确保正确的搜索结果。</P
></LI
><LI
><P
>添加一个<A
HREF="pgstattuple.html"
>pgstattuple</A
>函数，报告<ACRONYM
CLASS="ACRONYM"
>GIN</ACRONYM
>
索引等待插入的列表的大小 (Fujii Masao)</P
></LI
><LI
><P
>让<A
HREF="oid2name.html"
><SPAN
CLASS="APPLICATION"
>oid2name</SPAN
></A
>,
<A
HREF="pgbench.html"
><SPAN
CLASS="APPLICATION"
>pgbench</SPAN
></A
>,
和<A
HREF="vacuumlo.html"
><SPAN
CLASS="APPLICATION"
>vacuumlo</SPAN
></A
>设置
<TT
CLASS="VARNAME"
>fallback_application_name</TT
> (Amit Kapila)</P
></LI
><LI
><P
>改善<A
HREF="pgtesttiming.html"
><SPAN
CLASS="APPLICATION"
>pg_test_timing</SPAN
></A
>的输出 (Bruce Momjian)</P
></LI
><LI
><P
>改善<A
HREF="pgtestfsync.html"
><SPAN
CLASS="APPLICATION"
>pg_test_fsync</SPAN
></A
> 的输出 (Peter Geoghegan)</P
></LI
><LI
><P
>创建一个专用的外部数据封装器，带有它自己的选项验证器函数，
<A
HREF="dblink.html"
>dblink</A
> (Shigeru Hanada)</P
><P
>当使用这个FDW定义一个<SPAN
CLASS="APPLICATION"
>dblink</SPAN
>连接的目标时，取代使用连接选项的硬连线列表，
咨询底层的<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>库查看支持哪个连接选项。</P
></LI
></UL
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139525"
>E.31.3.11.1. <A
HREF="pgupgrade.html"
><SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
></A
></A
></H4
><P
></P
><UL
><LI
><P
>允许<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>并行转储和恢复 (Bruce Momjian, Andrew Dunstan)</P
><P
>这允许数据库的并行模式转储/恢复，也允许每个表空间并行拷贝/连接数据文件。
使用<TT
CLASS="OPTION"
>--jobs</TT
>选项指定并行的级别。</P
></LI
><LI
><P
>让<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>在当前目录中创建Unix域套接字 (Bruce Momjian, Tom Lane)</P
><P
>这减少了在升级期间某个人意外连接的可能性。</P
></LI
><LI
><P
>让<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
> <TT
CLASS="OPTION"
>--check</TT
>模式正确的检测非缺省套接字目录的位置
(Bruce Momjian, Tom Lane)</P
></LI
><LI
><P
>为拥有许多表的数据库提高<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>的性能 (Bruce Momjian)</P
></LI
><LI
><P
>通过显示执行的命令改进<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>的日志 (&Aacute;lvaro Herrera)</P
></LI
><LI
><P
>改进拷贝/连接期间<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>的状态显示 (Bruce Momjian)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN139552"
>E.31.3.11.2. <A
HREF="pgbench.html"
><SPAN
CLASS="APPLICATION"
>pgbench</SPAN
></A
></A
></H4
><P
></P
><UL
><LI
><P
>添加<TT
CLASS="OPTION"
>--foreign-keys</TT
>选项到<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
> (Jeff Janes)</P
><P
>这添加了外键约束到<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
>创建的标准表，用于外键性能测试。</P
></LI
><LI
><P
>允许<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
>集合性能统计和每<TT
CLASS="OPTION"
>--aggregate-interval</TT
>
秒产生输出 (Tomas Vondra)</P
></LI
><LI
><P
>添加<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
> <TT
CLASS="OPTION"
>--sampling-rate</TT
>选项，
控制事务日志的百分比 (Tomas Vondra)</P
></LI
><LI
><P
>减少并改进<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
>的初始化模式的状态消息输出 (Robert Haas, Peter Eisentraut)</P
></LI
><LI
><P
>添加<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
> <TT
CLASS="OPTION"
>-q</TT
>模式，每5秒打印一行输出 (Tomas Vondra)</P
></LI
><LI
><P
>在初始化期间输出<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
>经过和预估的剩余时间 (Tomas Vondra)</P
></LI
><LI
><P
>允许<SPAN
CLASS="APPLICATION"
>pgbench</SPAN
>使用更大的比例系数，当请求的比例系数超过20000时，
改变相关的字段从<TT
CLASS="TYPE"
>integer</TT
>到<TT
CLASS="TYPE"
>bigint</TT
> (Greg Smith)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN139586"
>E.31.3.12. 文档</A
></H3
><P
></P
><UL
><LI
><P
>允许创建<SPAN
CLASS="PRODUCTNAME"
>EPUB</SPAN
>格式文档 (Peter Eisentraut)</P
></LI
><LI
><P
>更新<SPAN
CLASS="PRODUCTNAME"
>FreeBSD</SPAN
>内核配置文档 (Brad Davis)</P
></LI
><LI
><P
>改进<A
HREF="tutorial-window.html"
><TT
CLASS="LITERAL"
>WINDOW</TT
>函数</A
>文档
(Bruce Momjian, Florian Pflug)</P
></LI
><LI
><P
>添加<A
HREF="docguide-toolsets.html"
>使用说明</A
>，
在Mac <SPAN
CLASS="PRODUCTNAME"
>OS X</SPAN
>上建立文档工具链 (Peter Eisentraut)</P
></LI
><LI
><P
>改进<A
HREF="runtime-config-wal.html#GUC-COMMIT-DELAY"
><TT
CLASS="VARNAME"
>commit_delay</TT
></A
>
文档 (Peter Geoghegan)</P
></LI
></UL
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-3-1.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>&#36215;&#22987;&#39029;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-2-18.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>版本 9.3.1</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>版本 9.2.18</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
