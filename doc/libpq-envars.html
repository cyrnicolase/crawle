<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>环境变量</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.0 手册"
HREF="index.html"><LINK
REL="UP"
TITLE="libpq - C 库"
HREF="libpq.html"><LINK
REL="PREVIOUS"
TITLE="事件系统"
HREF="libpq-events.html"><LINK
REL="NEXT"
TITLE="口令文件"
HREF="libpq-pgpass.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-12-17T04:56:33"></HEAD
><BODY
CLASS="SECT1"
>
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/9.6/postgresql/doc/src/sgml/libpq.sgml" target="_blank" 
title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.0 手册</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="事件系统"
HREF="libpq-events.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>&#31456; 32. <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> - C 库</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="口令文件"
HREF="libpq-pgpass.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="LIBPQ-ENVARS"
>32.14. 环境变量</A
></H1
><P
>   下列环境变量能被用于选择默认的连接参数值，如果调用代码没有直接指定值，它们将被用于<CODE
CLASS="FUNCTION"
>PQconnectdb</CODE
>、<CODE
CLASS="FUNCTION"
>PQsetdbLogin</CODE
>和<CODE
CLASS="FUNCTION"
>PQsetdb</CODE
>。例如，这些有助于防止数据库连接信息被硬编码到简单的客户端应用中。

   <P
></P
></P><UL
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGHOST</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-HOST"
>host</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGHOSTADDR</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-HOSTADDR"
>hostaddr</A
>连接参数相同。可以设置它来替代或者作为<TT
CLASS="ENVAR"
>PGHOST</TT
>的补充来防止 DNS 查找负担。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGPORT</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-PORT"
>port</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGDATABASE</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-DBNAME"
>dbname</A
>连接参数相同。
      </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGUSER</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-USER"
>user</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGPASSWORD</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-PASSWORD"
>password</A
>连接参数相同。出于安全原因，我们不推荐使用这个环境变量，因为某些操作系统允许非根用户通过<SPAN
CLASS="APPLICATION"
>ps</SPAN
>看到进程的环境变量。可以考虑使用<TT
CLASS="FILENAME"
>~/.pgpass</TT
>文件（见<A
HREF="libpq-pgpass.html"
>第 32.15 &#33410;</A
>）。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGPASSFILE</TT
>指定要用于查找的口令文件的名称。如果没有设置，默认为<TT
CLASS="FILENAME"
>~/.pgpass</TT
>（见<A
HREF="libpq-pgpass.html"
>第 32.15 &#33410;</A
>）。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSERVICE</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SERVICE"
>service</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSERVICEFILE</TT
>指定针对每个用户的连接服务文件名。如果没有设置，默认为<TT
CLASS="FILENAME"
>~/.pg_service.conf</TT
>（见<A
HREF="libpq-pgservice.html"
>第 32.16 &#33410;</A
>）。
     </P
></LI
><LI
><P
>      
      如果<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>要使用的 Kerberos 领域和本地领域不同，<TT
CLASS="ENVAR"
>PGREALM</TT
>可以设置它。如果<TT
CLASS="ENVAR"
>PGREALM</TT
>被设置，<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>应用将尝试通过服务器鉴定这个领域并且使用独立的票据文件来避免与本地票据文件冲突。只有在服务器选择了 GSSAPI 认证时，这个环境变量才被使用。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGOPTIONS</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-OPTIONS"
>options</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGAPPNAME</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-APPLICATION-NAME"
>application_name</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLMODE</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLMODE"
>sslmode</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGREQUIRESSL</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-REQUIRESSL"
>requiressl</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLCOMPRESSION</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLCOMPRESSION"
>sslcompression</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLCERT</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLCERT"
>sslcert</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLKEY</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLKEY"
>sslkey</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLROOTCERT</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLROOTCERT"
>sslrootcert</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSSLCRL</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-SSLCRL"
>sslcrl</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGREQUIREPEER</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-REQUIREPEER"
>requirepeer</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGKRBSRVNAME</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-KRBSRVNAME"
>krbsrvname</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGGSSLIB</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-GSSLIB"
>gsslib</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGCONNECT_TIMEOUT</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-CONNECT-TIMEOUT"
>connect_timeout</A
>连接参数相同。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGCLIENTENCODING</TT
>的行为和<A
HREF="libpq-connect.html#LIBPQ-CONNECT-CLIENT-ENCODING"
>client_encoding</A
>连接参数相同。
     </P
></LI
></UL
><P>
  </P
><P
>   下面的环境变量可用来为每一个<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>会话指定默认行为（为每一个用户或每一个数据库设置默认行为的方法还可见<A
HREF="sql-alterrole.html"
>ALTER ROLE</A
>和<A
HREF="sql-alterdatabase.html"
>ALTER DATABASE</A
>命令）。

   <P
></P
></P><UL
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGDATESTYLE</TT
>设置日期/时间表示的默认风格（等同于<TT
CLASS="LITERAL"
>SET datestyle TO ...</TT
>）。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGTZ</TT
>设置默认的时区（等同于<TT
CLASS="LITERAL"
>SET timezone TO ...</TT
>）。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGGEQO</TT
>为遗传查询优化器设置默认模式（等同于<TT
CLASS="LITERAL"
>SET geqo TO ...</TT
>）。
     </P
></LI
></UL
><P>

   这些环境变量的正确值可参考<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
> 命令 <A
HREF="sql-set.html"
>SET</A
>。
  </P
><P
>   下面的环境变量决定<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>的内部行为，它们会覆盖编译在程序中的默认值。

   <P
></P
></P><UL
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGSYSCONFDIR</TT
>设置包含<TT
CLASS="FILENAME"
>pg_service.conf</TT
>文件以及未来版本中可能出现的其他系统范围配置文件的目录。
     </P
></LI
><LI
><P
>      
      <TT
CLASS="ENVAR"
>PGLOCALEDIR</TT
>设置包含用于消息本地化的<TT
CLASS="LITERAL"
>locale</TT
>文件的目录。
     </P
></LI
></UL
><P>
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq-events.html"
ACCESSKEY="P"
>&#19978;&#19968;&#39029;</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>&#36215;&#22987;&#39029;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="libpq-pgpass.html"
ACCESSKEY="N"
>&#19979;&#19968;&#39029;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>事件系统</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libpq.html"
ACCESSKEY="U"
>&#19978;&#19968;&#32423;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>口令文件</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
